packageltd.newbee.mall.api.admin;importio.swagger.annotations.Api;importio.swagger.annotations.ApiOperation;importio.swagger.annotations.ApiParam;importltd.newbee.mall.api.admin.param.BatchIdParam;importltd.newbee.mall.api.admin.param.IndexConfigAddParam;importltd.newbee.mall.api.admin.param.IndexConfigEditParam;importltd.newbee.mall.common.IndexConfigTypeEnum;importltd.newbee.mall.common.ServiceResultEnum;importltd.newbee.mall.config.annotation.TokenToAdminUser;importltd.newbee.mall.entity.AdminUserToken;importltd.newbee.mall.entity.IndexConfig;importltd.newbee.mall.service.NewBeeMallIndexConfigService;importltd.newbee.mall.util.BeanUtil;importltd.newbee.mall.util.PageQueryUtil;importltd.newbee.mall.util.Result;importltd.newbee.mall.util.ResultGenerator;importorg.slf4j.Logger;importorg.slf4j.LoggerFactory;importorg.springframework.web.bind.annotation.*;importjavax.annotation.Resource;importjavax.validation.Valid;importjava.util.HashMap;importjava.util.Map;@RestController@Api(value="v1",tags="8-4.后台管理系统首页配置模块接口")@RequestMapping("/manage-api/v1")publicclassNewBeeAdminIndexConfigAPI{privatestaticfinalLoggerlogger=LoggerFactory.getLogger(NewBeeAdminIndexConfigAPI.class);@ResourceprivateNewBeeMallIndexConfigServicenewBeeMallIndexConfigService;@RequestMapping(value="/indexConfigs",method=RequestMethod.GET)@ApiOperation(value="首页配置列表",notes="首页配置列表")publicResultlist(@RequestParam(required=false)@ApiParam(value="页码")IntegerpageNumber,@RequestParam(required=false)@ApiParam(value="每页条数")IntegerpageSize,@RequestParam(required=false)@ApiParam(value="1-搜索框热搜 2-搜索下拉框热搜 3-(首页)热销商品 4-(首页)新品上线 5-(首页)为你推荐")IntegerconfigType,@TokenToAdminUserAdminUserTokenadminUser){logger.info("adminUser:{}",adminUser.toString());if(pageNumber==null||pageNumber<1||pageSize==null||pageSize<10){returnResultGenerator.genFailResult("分页参数异常！");}IndexConfigTypeEnumindexConfigTypeEnum=IndexConfigTypeEnum.getIndexConfigTypeEnumByType(configType);if(indexConfigTypeEnum.equals(IndexConfigTypeEnum.DEFAULT)){returnResultGenerator.genFailResult("非法参数！");}Mapparams=newHashMap(8);params.put("page",pageNumber);params.put("limit",pageSize);params.put("configType",configType);PageQueryUtilpageUtil=newPageQueryUtil(params);returnResultGenerator.genSuccessResult(newBeeMallIndexConfigService.getConfigsPage(pageUtil));}@RequestMapping(value="/indexConfigs",method=RequestMethod.POST)@ApiOperation(value="新增首页配置项",notes="新增首页配置项")publicResultsave(@RequestBody@ValidIndexConfigAddParamindexConfigAddParam,@TokenToAdminUserAdminUserTokenadminUser){logger.info("adminUser:{}",adminUser.toString());IndexConfigindexConfig=newIndexConfig();BeanUtil.copyProperties(indexConfigAddParam,indexConfig);Stringresult=newBeeMallIndexConfigService.saveIndexConfig(indexConfig);if(ServiceResultEnum.SUCCESS.getResult().equals(result)){returnResultGenerator.genSuccessResult();}else{returnResultGenerator.genFailResult(result);}}@RequestMapping(value="/indexConfigs",method=RequestMethod.PUT)@ApiOperation(value="修改首页配置项",notes="修改首页配置项")publicResultupdate(@RequestBody@ValidIndexConfigEditParamindexConfigEditParam,@TokenToAdminUserAdminUserTokenadminUser){logger.info("adminUser:{}",adminUser.toString());IndexConfigindexConfig=newIndexConfig();BeanUtil.copyProperties(indexConfigEditParam,indexConfig);Stringresult=newBeeMallIndexConfigService.updateIndexConfig(indexConfig);if(ServiceResultEnum.SUCCESS.getResult().equals(result)){returnResultGenerator.genSuccessResult();}else{returnResultGenerator.genFailResult(result);}}@RequestMapping(value="/indexConfigs/{id}",method=RequestMethod.GET)@ApiOperation(value="获取单条首页配置项信息",notes="根据id查询")publicResultinfo(@PathVariable("id")Longid,@TokenToAdminUserAdminUserTokenadminUser){logger.info("adminUser:{}",adminUser.toString());IndexConfigconfig=newBeeMallIndexConfigService.getIndexConfigById(id);if(config==null){returnResultGenerator.genFailResult("未查询到数据");}returnResultGenerator.genSuccessResult(config);}@RequestMapping(value="/indexConfigs",method=RequestMethod.DELETE)@ApiOperation(value="批量删除首页配置项信息",notes="批量删除首页配置项信息")publicResultdelete(@RequestBodyBatchIdParambatchIdParam,@TokenToAdminUserAdminUserTokenadminUser){logger.info("adminUser:{}",adminUser.toString());if(batchIdParam==null||batchIdParam.getIds().length<1){returnResultGenerator.genFailResult("参数异常！");}if(newBeeMallIndexConfigService.deleteBatch(batchIdParam.getIds())){returnResultGenerator.genSuccessResult();}else{returnResultGenerator.genFailResult("删除失败");}}}